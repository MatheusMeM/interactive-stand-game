# app/ui/screens.kv
#:kivy 2.1.0

# Define brand colors for reusability
#:set color_primary_blue (0/255, 64/255, 119/255, 1)      # #004077
#:set color_primary_green (134/255, 188/255, 37/255, 1)   # #86BC25
#:set color_white (1, 1, 1, 1)
#:set color_dark_gray (137/255, 137/255, 137/255, 1) # rgba(137, 137, 137, 1)

# Base styles for widgets to maintain consistency
<BrandedButton@Button>:
    font_name: 'Roboto'
    background_color: color_primary_green
    color: color_primary_blue
    font_size: '35sp'
    bold: True
    background_normal: ''

<BrandedLabel@Label>:
    font_name: 'Roboto'
    color: color_primary_blue
    halign: 'center'
    valign: 'middle'

# --- Screen Designs ---

<WelcomeScreen>:
    name: 'welcome'
    canvas.before:
        Color:
            rgba: color_white
        Rectangle:
            pos: self.pos
            size: self.size
    FloatLayout:
        Image:
            source: 'assets/images/background_graphic.png'
            allow_stretch: True
            keep_ratio: False
            opacity: 0.15
        Image:
            source: 'assets/images/ibp_logo.png'
            size_hint: 0.7, 0.7
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}
        BrandedLabel:
            text: 'BRAND CHALLENGE'
            font_size: '50sp'
            pos_hint: {'center_x': 0.5, 'center_y': 0.85}
        BrandedButton:
            text: 'TOUCH TO START'
            size_hint: 0.8, 0.15
            pos_hint: {'center_x': 0.5, 'center_y': 0.15}
            on_press: app.game_manager.show_instructions()

<InstructionsScreen>:
    name: 'instructions'
    canvas.before:
        Color:
            rgba: color_white
        Rectangle:
            pos: self.pos
            size: self.size
    Image:
        source: 'assets/images/background_graphic.png'
        allow_stretch: True
        keep_ratio: False
        opacity: 0.15
    BoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 30
        BrandedLabel:
            text: 'Get Ready!\n\nPress the illuminated button as fast as you can.\n\nThen, test your knowledge in the quiz!'
            font_size: '30sp'
        BrandedButton:
            text: 'START GAME'
            on_press: app.game_manager.start_game()

<AgilityGameScreen>:
    name: 'agility_game'
    canvas.before:
        Color:
            rgba: color_dark_gray
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 20
        BrandedLabel:
            id: countdown_label
            text: 'Get Ready!'
            font_size: '120sp'
            bold: True
            size_hint_y: 0.8
            color: color_white
        BoxLayout:
            size_hint_y: 0.2
            BrandedLabel:
                id: round_label
                text: 'Round: 0 / 5'
                font_size: '30sp'
                color: color_white
            BrandedLabel:
                id: score_label
                text: 'Score: 0'
                font_size: '30sp'
                color: color_white

<QuizGameScreen>:
    name: 'quiz_game'
    canvas.before:
        Color:
            rgba: color_white
        Rectangle:
            pos: self.pos
            size: self.size
    Image:
        source: 'assets/images/background_graphic.png'
        allow_stretch: True
        keep_ratio: False
        opacity: 0.15
    BoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 20
        BrandedLabel:
            id: question_label
            text: '...'
            font_size: '30sp'
            size_hint_y: 0.4
            text_size: self.width, None
        GridLayout:
            cols: 2
            spacing: 15
            BrandedButton:
                id: option_1
                on_press: app.game_manager.check_answer(self.text)
            BrandedButton:
                id: option_2
                on_press: app.game_manager.check_answer(self.text)
            BrandedButton:
                id: option_3
                on_press: app.game_manager.check_answer(self.text)
            BrandedButton:
                id: option_4
                on_press: app.game_manager.check_answer(self.text)
        BrandedLabel:
            id: feedback_label
            text: ''
            font_size: '25sp'
            size_hint_y: 0.15

<ScoreScreen>:
    name: 'score'
    canvas.before:
        Color:
            rgba: color_white
        Rectangle:
            pos: self.pos
            size: self.size
    Image:
        source: 'assets/images/background_graphic.png'
        allow_stretch: True
        keep_ratio: False
        opacity: 0.15
    BoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 20
        BrandedLabel:
            text: 'Congratulations!'
            font_size: '50sp'
        BrandedLabel:
            id: final_score_label
            text: 'Your Final Score: 0'
            font_size: '40sp'
        TextInput:
            id: name_input
            hint_text: 'ENTER YOUR INITIALS'
            font_name: 'Roboto'
            font_size: '35sp'
            multiline: False
            readonly: True
            halign: 'center'
            size_hint_y: None
            height: '60dp'
        BrandedButton:
            text: 'Submit Score'
            on_press: app.game_manager.submit_score(name_input.text)
        VKeyboard:
            target: name_input
            layout: 'qwerty'

<LeaderboardScreen>:
    name: 'leaderboard'
    canvas.before:
        Color:
            rgba: color_white
        Rectangle:
            pos: self.pos
            size: self.size
    Image:
        source: 'assets/images/background_graphic.png'
        allow_stretch: True
        keep_ratio: False
        opacity: 0.15
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10
        BrandedLabel:
            text: 'Hall of Fame'
            font_size: '50sp'
            size_hint_y: 0.2
        BrandedLabel:
            id: congrats_label
            text: ''
            font_size: '30sp'
            size_hint_y: 0.1
            color: color_primary_green
        GridLayout:
            id: leaderboard_grid
            cols: 3
            size_hint_y: 0.6
        BrandedButton:
            text: 'Play Again'
            size_hint_y: 0.1
            on_press: app.game_manager.return_to_welcome()